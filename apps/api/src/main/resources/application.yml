spring:
  application:
    name: briefy-api

  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/briefy}
    username: ${DB_USER:briefy}
    password: ${DB_PASSWORD:briefy}

  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  ai:
    model:
      chat: ${LLM_PROVIDER:none}
      embedding: none
      image: none
    zhipuai:
      api-key: ${ZHIPUAI_API_KEY:${LLM_API_KEY:}}
      base-url: ${ZHIPUAI_BASE_URL:https://api.z.ai/api/paas}
      chat:
        api-key: ${ZHIPUAI_CHAT_API_KEY:${ZHIPUAI_API_KEY:${LLM_API_KEY:}}}
        base-url: ${ZHIPUAI_CHAT_BASE_URL:${ZHIPUAI_BASE_URL:https://api.z.ai/api/paas}}
        options:
          model: ${ZHIPUAI_CHAT_MODEL:glm-4.7-flash}
    google:
      genai:
        api-key: ${GOOGLE_GENAI_API_KEY:}

server:
  port: ${SERVER_PORT:8081}

auth:
  jwt:
    secret: ${JWT_SECRET:dev-secret-change-me-dev-secret-change-me}
    access-token-minutes: ${JWT_ACCESS_TOKEN_MINUTES:15}
  refresh-token:
    days: ${JWT_REFRESH_TOKEN_DAYS:30}
  cookie:
    secure: ${AUTH_COOKIE_SECURE:false}
    same-site: ${AUTH_COOKIE_SAME_SITE:Lax}

security:
  encryption-key: ${ENCRYPTION_KEY:MDEyMzQ1Njc4OWFiY2RlZjAxMjM0NTY3ODlhYmNkZWY=}

extraction:
  firecrawl:
    base-url: ${FIRECRAWL_BASE_URL:https://api.firecrawl.dev}
    wait-for-ms: ${FIRECRAWL_WAIT_FOR_MS:1000}
  youtube:
    enabled: ${YOUTUBE_EXTRACTION_ENABLED:true}
    yt-dlp-path: ${YOUTUBE_YT_DLP_PATH:yt-dlp}
    ffmpeg-path: ${YOUTUBE_FFMPEG_PATH:ffmpeg}
    max-duration-seconds: ${YOUTUBE_MAX_DURATION_SECONDS:7200}
    command-timeout-seconds: ${YOUTUBE_COMMAND_TIMEOUT_SECONDS:180}
    worker:
      poll-ms: ${YOUTUBE_WORKER_POLL_MS:5000}
      batch-size: ${YOUTUBE_WORKER_BATCH_SIZE:5}
      max-attempts: ${YOUTUBE_WORKER_MAX_ATTEMPTS:5}
      processing-timeout-seconds: ${YOUTUBE_WORKER_PROCESSING_TIMEOUT_SECONDS:900}

transcription:
  openai:
    api-key: ${TRANSCRIPTION_OPENAI_API_KEY:${OPENAI_API_KEY:}}
    model: ${TRANSCRIPTION_OPENAI_MODEL:whisper-1}

google:
  auth:
    enabled: ${GOOGLE_AUTH_ENABLED:false}
    client-id: ${GOOGLE_CLIENT_ID:}
    client-secret: ${GOOGLE_CLIENT_SECRET:}
    redirect-uri: ${GOOGLE_REDIRECT_URI:}

management:
  tracing:
    sampling:
      probability: 1.0
  endpoints:
    web:
      exposure:
        include: health,info
